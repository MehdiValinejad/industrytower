(function(n,t){var r,i;return i=t.document,r=function(){function r(i){var r;try{r=t.localStorage}catch(u){r=!1}this._options=n.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:r,debug:!1,backdrop:!1,backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"><\/div> <h3 class="popover-title"><\/h3> <div class="popover-content"><\/div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev<\/button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;<\/button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause<\/button> <\/div> <button class="btn btn-sm btn-default" data-role="end">End tour<\/button> <\/div> <\/div>',afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},i);this._force=!1;this._inited=!1;this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1};this}return r.prototype.addSteps=function(n){for(var i,t=0,r=n.length;t<r;t++)i=n[t],this.addStep(i);return this},r.prototype.addStep=function(n){return this._options.steps.push(n),this},r.prototype.getStep=function(t){if(this._options.steps[t]!=null)return n.extend({id:"step-"+t,path:"",placement:"right",title:"",content:"<p><\/p>",next:t===this._options.steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[t])},r.prototype.init=function(n){return(this._force=n,this.ended())?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(n){return function(){return n.showStep(n._current)}}(this)),this._current!==null&&this.showStep(this._current),this._inited=!0,this)},r.prototype.start=function(n){var t;return n==null&&(n=!1),this._inited||this.init(n),this._current===null&&(t=this._makePromise(this._options.onStart!=null?this._options.onStart(this):void 0),this._callOnPromiseDone(t,this.showStep,0)),this},r.prototype.next=function(){var n;return n=this.hideStep(this._current),this._callOnPromiseDone(n,this._showNextStep)},r.prototype.prev=function(){var n;return n=this.hideStep(this._current),this._callOnPromiseDone(n,this._showPrevStep)},r.prototype.goTo=function(n){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this.showStep,n)},r.prototype.end=function(){var r,u;return r=function(r){return function(){if(n(i).off("click.tour-"+r._options.name),n(i).off("keyup.tour-"+r._options.name),n(t).off("resize.tour-"+r._options.name),r._setState("end","yes"),r._inited=!1,r._force=!1,r._clearTimer(),r._options.onEnd!=null)return r._options.onEnd(r)}}(this),u=this.hideStep(this._current),this._callOnPromiseDone(u,r)},r.prototype.ended=function(){return!this._force&&!!this._getState("end")},r.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},r.prototype.pause=function(){var n;if(n=this.getStep(this._current),!(n&&n.duration))return this;if(this._paused=!0,this._duration-=(new Date).getTime()-this._start,t.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),n.onPause!=null)return n.onPause(this,this._duration)},r.prototype.resume=function(){var n;if(n=this.getStep(this._current),!(n&&n.duration))return this;if(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||n.duration,this._timer=t.setTimeout(function(n){return function(){return n._isLast()?n.next():n.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),n.onResume!=null&&this._duration!==n.duration)return n.onResume(this,this._duration)},r.prototype.hideStep=function(t){var u,r,i;if(i=this.getStep(t),i)return this._clearTimer(),r=this._makePromise(i.onHide!=null?i.onHide(this,t):void 0),u=function(r){return function(){var u;if(u=n(i.element),u.data("bs.popover")||u.data("popover")||(u=n("body")),u.popover("destroy").removeClass("tour-"+r._options.name+"-element tour-"+r._options.name+"-"+t+"-element"),i.reflex&&u.removeClass("tour-step-element-reflex").off(""+r._reflexEvent(i.reflex)+".tour-"+r._options.name),i.backdrop&&r._hideBackdrop(),i.onHidden!=null)return i.onHidden(r)}}(this),this._callOnPromiseDone(r,u),r},r.prototype.showStep=function(n){var u,f,e,r;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(r=this.getStep(n),!r)?void 0:(e=n<this._current,u=this._makePromise(r.onShow!=null?r.onShow(this,n):void 0),f=function(t){return function(){var o,u,f;if(t.setCurrentStep(n),u=function(){switch({}.toString.call(r.path)){case"[object Function]":return r.path();case"[object String]":return this._options.basePath+r.path;default:return r.path}}.call(t),o=[i.location.pathname,i.location.hash].join(""),t._isRedirect(u,o)){t._redirect(r,u);return}if(t._isOrphan(r)){if(!r.orphan){t._debug("Skip the orphan step "+(t._current+1)+".\nOrphan option is false and the element does not exist or is hidden.");e?t._showPrevStep():t._showNextStep();return}t._debug("Show the orphan step "+(t._current+1)+". Orphans option is true.")}return r.backdrop&&t._showBackdrop(t._isOrphan(r)?void 0:r.element),f=function(){if(t.getCurrentStep()===n){if(r.element!=null&&r.backdrop&&t._showOverlayElement(r),t._showPopover(r,n),r.onShown!=null)r.onShown(t);return t._debug("Step "+(t._current+1)+" of "+t._options.steps.length)}},r.autoscroll?t._scrollIntoView(r.element,f):f(),r.duration?t.resume():void 0}}(this),r.delay?(this._debug("Wait "+r.delay+" milliseconds to show the step "+(this._current+1)),t.setTimeout(function(n){return function(){return n._callOnPromiseDone(u,f)}}(this),r.delay)):this._callOnPromiseDone(u,f),u)},r.prototype.getCurrentStep=function(){return this._current},r.prototype.setCurrentStep=function(n){return n!=null?(this._current=n,this._setState("current_step",n)):(this._current=this._getState("current_step"),this._current=this._current===null?null:parseInt(this._current,10)),this},r.prototype._setState=function(n,t){var r,i;if(this._options.storage){i=""+this._options.name+"_"+n;try{this._options.storage.setItem(i,t)}catch(u){r=u;r.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(i,t)}return this._state==null&&(this._state={}),this._state[n]=t},r.prototype._removeState=function(n){var t;return this._options.storage?(t=""+this._options.name+"_"+n,this._options.storage.removeItem(t),this._options.afterRemoveState(t)):this._state!=null?delete this._state[n]:void 0},r.prototype._getState=function(n){var i,t;return this._options.storage?(i=""+this._options.name+"_"+n,t=this._options.storage.getItem(i)):this._state!=null&&(t=this._state[n]),(t===void 0||t==="null")&&(t=null),this._options.afterGetState(n,t),t},r.prototype._showNextStep=function(){var t,i,n;return n=this.getStep(this._current),i=function(t){return function(){return t.showStep(n.next)}}(this),t=this._makePromise(n.onNext!=null?n.onNext(this):void 0),this._callOnPromiseDone(t,i)},r.prototype._showPrevStep=function(){var t,i,n;return n=this.getStep(this._current),i=function(t){return function(){return t.showStep(n.prev)}}(this),t=this._makePromise(n.onPrev!=null?n.onPrev(this):void 0),this._callOnPromiseDone(t,i)},r.prototype._debug=function(n){if(this._options.debug)return t.console.log("Bootstrap Tour '"+this._options.name+"' | "+n)},r.prototype._isRedirect=function(n,t){return n!=null&&n!==""&&({}.toString.call(n)==="[object RegExp]"&&!n.test(t)||{}.toString.call(n)==="[object String]"&&n.replace(/\?.*$/,"").replace(/\/?$/,"")!==t.replace(/\/?$/,""))},r.prototype._redirect=function(t,r){return n.isFunction(t.redirect)?t.redirect.call(this,r):t.redirect===!0?(this._debug("Redirect to "+r),i.location.href=r):void 0},r.prototype._isOrphan=function(t){return t.element==null||!n(t.element).length||n(t.element).is(":hidden")&&n(t.element)[0].namespaceURI!=="http://www.w3.org/2000/svg"},r.prototype._isLast=function(){return this._current<this._options.steps.length-1},r.prototype._showPopover=function(t,i){var r,u,f,e;if(n(".tour-"+this._options.name).remove(),e=n.extend({},this._options),f=this._isOrphan(t),t.template=this._template(t,i),f&&(t.element="body",t.placement="top"),r=n(t.element),r.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+i+"-element"),t.options&&n.extend(e,t.options),t.reflex&&!f){r.addClass("tour-step-element-reflex");r.off(""+this._reflexEvent(t.reflex)+".tour-"+this._options.name);r.on(""+this._reflexEvent(t.reflex)+".tour-"+this._options.name,function(n){return function(){return n._isLast()?n.next():n.end()}}(this))}return r.popover({placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),u=r.data("bs.popover")?r.data("bs.popover").tip():r.data("popover").tip(),u.attr("id",t.id),this._reposition(u,t),f?this._center(u):void 0},r.prototype._template=function(t,i){var r,f,e,u;return u=n.isFunction(t.template)?n(t.template(i,t)):n(t.template),r=u.find(".popover-navigation"),e=r.find('[data-role="prev"]'),f=r.find('[data-role="next"]'),this._isOrphan(t)&&u.addClass("orphan"),u.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+i),t.prev<0&&r.find('[data-role="prev"]').addClass("disabled"),t.next<0&&r.find('[data-role="next"]').addClass("disabled"),t.duration||r.find('[data-role="pause-resume"]').remove(),u.clone().wrap("<div>").parent().html()},r.prototype._reflexEvent=function(n){return{}.toString.call(n)==="[object Boolean]"?"click":n},r.prototype._reposition=function(t,r){var f,h,e,c,o,s,u;if(c=t[0].offsetWidth,h=t[0].offsetHeight,u=t.offset(),o=u.left,s=u.top,f=n(i).outerHeight()-u.top-t.outerHeight(),f<0&&(u.top=u.top+f),e=n("html").outerWidth()-u.left-t.outerWidth(),e<0&&(u.left=u.left+e),u.top<0&&(u.top=0),u.left<0&&(u.left=0),t.offset(u),r.placement==="bottom"||r.placement==="top"){if(o!==u.left)return this._replaceArrow(t,(u.left-o)*2,c,"left")}else if(s!==u.top)return this._replaceArrow(t,(u.top-s)*2,h,"top")},r.prototype._center=function(i){return i.css("top",n(t).outerHeight()/2-i.outerHeight()/2)},r.prototype._replaceArrow=function(n,t,i,r){return n.find(".arrow").css(r,t?50*(1-t/i)+"%":"")},r.prototype._scrollIntoView=function(i,r){var u,f,h,e,o,s;return(u=n(i),!u.length)?r():(f=n(t),e=u.offset().top,s=f.height(),o=Math.max(0,e-s/2),this._debug("Scroll into view. ScrollTop: "+o+". Element offset: "+e+". Window height: "+s+"."),h=0,n("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(o)},function(n){return function(){if(++h==2)return r(),n._debug("Scroll into view.\nAnimation end element offset: "+u.offset().top+".\nWindow height: "+f.height()+".")}}(this)))},r.prototype._onResize=function(i,r){return n(t).on("resize.tour-"+this._options.name,function(){return clearTimeout(r),r=setTimeout(i,100)})},r.prototype._initMouseNavigation=function(){var t=this;return n(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(n){return function(t){return t.preventDefault(),n.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(n){return function(t){return t.preventDefault(),n.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(n){return function(t){return t.preventDefault(),n.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(i){var r;return i.preventDefault(),r=n(this),r.text(t._paused?r.data("pause-text"):r.data("resume-text")),t._paused?t.resume():t.pause()})},r.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return n(i).on("keyup.tour-"+this._options.name,function(n){return function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),n._isLast()?n.next():n.end();case 37:if(t.preventDefault(),n._current>0)return n.prev();break;case 27:return t.preventDefault(),n.end()}}}(this))},r.prototype._makePromise=function(t){return t&&n.isFunction(t.then)?t:null},r.prototype._callOnPromiseDone=function(n,t,i){return n?n.then(function(n){return function(){return t.call(n,i)}}(this)):t.call(this,i)},r.prototype._showBackdrop=function(){if(!this.backdrop.backgroundShown)return this.backdrop=n("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,n("body").append(this.backdrop)},r.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},r.prototype._hideBackground=function(){if(this.backdrop)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},r.prototype._showOverlayElement=function(t){var i,r;if(i=n(t.element),i&&i.length!==0&&!this.backdrop.overlayElementShown)return this.backdrop.overlayElementShown=!0,this.backdrop.$element=i.addClass("tour-step-backdrop"),this.backdrop.$background=n("<div>",{"class":"tour-step-background"}),r={width:i.innerWidth(),height:i.innerHeight(),offset:i.offset()},this.backdrop.$background.appendTo("body"),t.backdropPadding&&(r=this._applyBackdropPadding(t.backdropPadding,r)),this.backdrop.$background.width(r.width).height(r.height).offset(r.offset)},r.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},r.prototype._applyBackdropPadding=function(n,t){return typeof n=="object"?(n.top==null&&(n.top=0),n.right==null&&(n.right=0),n.bottom==null&&(n.bottom=0),n.left==null&&(n.left=0),t.offset.top=t.offset.top-n.top,t.offset.left=t.offset.left-n.left,t.width=t.width+n.left+n.right,t.height=t.height+n.top+n.bottom):(t.offset.top=t.offset.top-n,t.offset.left=t.offset.left-n,t.width=t.width+n*2,t.height=t.height+n*2),t},r.prototype._clearTimer=function(){return t.clearTimeout(this._timer),this._timer=null,this._duration=null},r}(),t.Tour=r})(jQuery,window);
//# sourceMappingURL=bootstrap-tour.min.js.map
