function UploadFile(n,t,i,r,u){function e(f,e,o,s,h,c){$(f).fileupload({dropZone:null,url:e+"?"+(new Date).getTime(),add:function(f,e){var h=!0,l=$(this).parents(".hasUpload").find(o).val().split(",").length,c;l>t&&(modalApear(),modalError(r),h=!1);c=e.files[0];s.test(c.name)||(modalApear(),modalError(u),h=!1);c.size>n&&(modalApear(),modalError(i),h=!1);h==!0&&e.submit()},autoUpload:!0,done:function(n,t){h!=null&&h(n,t,$(this))},fail:function(n,t){var i,r;c!=null&&c(n,t);i=$.parseJSON(t.jqXHR.responseText).errorMessage;t.status==400?(r=i.split("||"),$.each(r,function(n,t){$("[data-valmsg-for='"+t.split("%%")[0]+"']").html(t.split("%%")[1]).show().addClass("field-validation-error")})):(modalApear(),modalError(i));$(this).parent("form").find("input[type='submit']").prop("disabled",!1)}}).on("fileuploadprogressall",function(n,t){loadingBox($("#newProfilePic"));var i=parseInt(t.loaded/t.total*100,10);$PB=$(this).parents(".hasUpload").find(".progress-bar");$PB.css("width",i+"%");$PB.attr("aria-valuenow",i);$PB.find(".sr-only").text(i+"%")})}var f=$("#ROOT").val();e("input#profilePic",f+"Home/ProfilePicUpload/","input#picToUpload",/\.(gif|jpg|jpeg|png)$/i,function(n,t,i){$HF=i.parents(".hasUpload").find("input#picToUpload");$("form.newprofile-pic, form.newCompany-pic, form.newStore-pic").show();t.dataType=="iframe "?($("#newProfilePic").html("<div id='image-cropper'><div class='cropit-image-preview center-block'><\/div><\/div>"),$HF.val($(t.result).text())):($("#newProfilePic").html("<div id='image-cropper' class='text-center'><div class='cropit-image-preview-container inline-block'><div class='cropit-image-preview'><\/div><\/div><\/div>"),$HF.val(t.result));$(".crop-help").show();$imageCropper=$("#image-cropper");t.dataType=="iframe "?$imageCropper.cropit({imageState:{src:"/Uploads/Temporary/"+$HF.val($(t.result).text())+"?"+(new Date).getTime()},imageBackground:!0}):$imageCropper.cropit({imageState:{src:"/Uploads/Temporary/"+t.result+"?"+(new Date).getTime()},imageBackground:!0});setInterval(function(){if($imageCropper.length>0){var n=$imageCropper.cropit("offset"),t=$imageCropper.cropit("previewSize"),o=$imageCropper.cropit("imageSize"),i=$imageCropper.cropit("zoom"),r,u,f,e;o.height/o.width>1?(f=n.x/i,e=n.y/i,r=t.width/i,u=t.height/i):(f=n.x,e=n.y,r=t.width,u=t.height);$("input[id='x']").val(Math.abs(Math.ceil(f)));$("input[id='y']").val(Math.abs(Math.ceil(e)));$("input[id='w']").val(Math.ceil(r));$("input[id='h']").val(Math.ceil(u))}},500)});e("input#postFiles",f+"Home/postFileUpload/","input[id='filesToUpload']",/\.(gif|jpg|jpeg|png|pdf|xls|xlsx|pps|ppt|ppsx|mda|mdb|accdb|doc|docx)$/i,function(n,t,i){var f=i.parents(".hasUpload").find("#uploadedFiles"),r;t.dataType=="iframe "?fileExtension($(t.result).text(),f,u):fileExtension(t.result,f,f,u);$HF=i.parents(".hasUpload").find("input#filesToUpload");r=[];$.each($HF.val().split(","),function(n,t){t!==""&&r.push(t)});t.dataType=="iframe "?r.push($(t.result).text()):r.push(t.result);$HF.val(r.join(","));setTimeout(function(){$(".progress-bar").width(0);$(".progress-bar").attr("aria-valuenow",0)},1500)});e("input#ProServFiles",f+"Home/ProServFileUpload/","input#filesToUpload",/\.(gif|jpg|jpeg|png|pdf|xls|xlsx|pps|ppt|ppsx|mda|mdb|accdb|doc|docx)$/i,function(n,t,i){var f=i.parents(".hasUpload").find("ul#uploadedImages"),e=i.parents(".hasUpload").find("ul#uploadedDocuments"),r;t.dataType=="iframe "?ProServFileExtension($(t.result).text(),f,e,u):ProServFileExtension(t.result,f,e,u);$HF=$("input[id='filesToUpload']");r=[];$.each($HF.val().split(","),function(n,t){t!==""&&r.push(t)});t.dataType=="iframe "?r.push($(t.result).text()):r.push(t.result);$HF.val(r.join(","));setTimeout(function(){$(".progress-bar").width(0)},1500)});e("input#bookFiles",f+"Home/bookFileUpload/","input[id='filesToUpload']",/\.(gif|jpg|jpeg|png|pdf|pps|ppt|ppsx|doc|docx)$/i,function(n,t,i){var f=i.parents(".hasUpload").find("#uploadedFiles"),r;t.dataType=="iframe "?fileExtension($(t.result).text(),f,u):fileExtension(t.result,f,f,u);$HF=i.parents(".hasUpload").find("input#filesToUpload");r=[];$.each($HF.val().split(","),function(n,t){t!==""&&r.push(t)});t.dataType=="iframe "?r.push($(t.result).text()):r.push(t.result);$HF.val(r.join(","));setTimeout(function(){$(".progress-bar").width(0);$(".progress-bar").attr("aria-valuenow",0)},1500)});$(document).delegate("#uploadedFiles li button","click",function(){var n=$(this).parent("li"),i=n.parent("ul"),r=n.data("file"),t;$HHH=n.parents(".hasUpload").find("input[id='filesToUpload']");$HHH.val()!=null&&(t=$HHH.val().split(","),t=jQuery.grep(t,function(n){return n!=r}),n.remove(),$HHH.val(t.join(",")));i.children("li").length==0&&i.find("div.subject-small").hide()})}function uploadedInsert(n,t,i,r){var u;u=r!=null?"<a href='"+i+"'><div class='thumbnail icn-60 "+r+"'><\/div><\/a>":"<img src='"+i+"' class='thumbnail full-height' >";n.append("<li class='margin-top-bot-md margin-lf-r8-md ver-top' data-file='"+t+"'><button type='button' class='close'><span aria-hidden='true'>&times;<\/span><span class='sr-only'>Close<\/span><\/button>"+u+"<\/li>")}function labelHandler(n){n.has("li")&&n.find("div.subject-small").show()}function ProServFileExtension(n,t,i,r){var f=n.split(".").pop(),u="/Uploads/Temporary/"+n;switch(f.toLowerCase()){case"jpg":case"gif":case"png":case"jpeg":uploadedInsert(t,n,u);labelHandler(t);break;case"pdf":uploadedInsert(i,n,u,"icon-pdf");labelHandler(i);break;case"doc":case"docx":uploadedInsert(i,n,u,"icon-word");labelHandler(i);break;case"xls":case"xlsx":uploadedInsert(i,n,u,"icon-excel");labelHandler(i);break;case"pps":case"ppt":case"ppsx":uploadedInsert(i,n,u,"icon-powerpoint");labelHandler(i);break;case"mda":case"mdb":case"accdb":uploadedInsert(i,n,u,"icon-database");labelHandler(i);break;default:modalApear();modalError(r)}}function fileExtension(n,t,i){var u=n.split(".").pop(),r="/Uploads/Temporary/"+n;switch(u.toLowerCase()){case"jpg":case"gif":case"png":case"jpeg":r="/Uploads/Temporary/"+n;uploadedInsert(t,n,r);break;case"pdf":uploadedInsert(t,n,r,"icon-pdf");break;case"doc":case"docx":uploadedInsert(t,n,r,"icon-word");break;case"xls":case"xlsx":uploadedInsert(t,n,r,"icon-excel");break;case"pps":case"ppt":case"ppsx":uploadedInsert(t,n,r,"icon-powerpoint");break;case"mda":case"mdb":case"accdb":uploadedInsert(t,n,r,"icon-database");break;default:modalApear();modalError(i)}}