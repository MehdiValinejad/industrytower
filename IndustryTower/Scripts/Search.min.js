function submitSearch(n,t){var r=$("#ROOT").val(),u=$("input#searchType").val(),f=$("input#currentFilter").val(),i=$("input#sortOrder").val();stateArray=[];categoryArray=[];professionArray=[];coSizeArray=[];expCosArray=[];$("input[type='checkbox']#searchPanelState:checked").each(function(n,t){stateArray.push($(t).val())});$("input[type='checkbox']#searchPanelCats:checked").each(function(n,t){categoryArray.push($(t).val())});$("input[type='checkbox']#searchPanelProf:checked").each(function(n,t){professionArray.push($(t).val())});$("input[type='checkbox']#searchPanelCoSize:checked").each(function(n,t){coSizeArray.push($(t).val())});$("input[type='checkbox']#searchPanelCos:checked").each(function(n,t){expCosArray.push($(t).val())});loadingBox($("html"),"mainsearchLoading");$.ajax({url:r+"Home/TotalSearch",cache:!1,type:"GET",dataType:"json",traditional:!0,data:{searchType:u,currentFilter:f,sortOrder:i,page:n,searchStates:stateArray,searchCats:categoryArray,searchProfessions:professionArray,searchCoSize:coSizeArray,searchExpCo:expCosArray},success:function(n){$(".mainsearchLoading").fadeOut("slow",function(){$(this).remove()});t!=null?t(n):($(".search-results").html(n.Result),$(".search-result-count span").html(n.ResultCount),$(".search-menu-criteria").replaceWith(n.SearchPanel),$("input,textarea").placeholder())},complete:function(){$parent.find(".expandable").expander();PartialContentLoader($parent);$("div.sort-item").each(function(){var n=$(this).data("order").toLowerCase();i!=""&&(n.match("^"+i.toLowerCase())||i.match("^"+n.toLowerCase()))&&$(this).addClass("active-sort")})}})}$(document).ready(function(){var r=$("input#searchType").val(),t=$(".search-type-choose").find("div[data-search='"+r+"']"),i,n;$("input#SearchString").attr("placeholder",t.data("ph"));t.parents("li:eq(0)").addClass("search-active-class");i=t.clone();$(".active-search-img div").replaceWith(i.addClass("active-search-img"));$("div.search-menu a").each(function(n,t){var i=$(t).data("searchtype").toLowerCase(),r=$("input#searchType").val().toLowerCase();(i!==""&&i===r||window.location.pathname==="/"&&i==="")&&($(t).parents("li").addClass("active"),$(".search-create[data-searchtype='"+$(t).data("searchtype")+"']").show())});$(".top-menu div").each(function(n,t){var i=$(t).data("searchtype").toLowerCase(),r=$("input#searchType").val().toLowerCase();if(i!==""&&i===r||window.location.pathname==="/"&&i===""){if(i==="all"&&i===r&&window.location.pathname.indexOf("TotalSearch")===-1)return!1;$(t).addClass("active")}});$(".active-search").click(function(){$(".search-type-choose").toggle()});$(".search-option").click(function(){var n,t;$(".search-top li.active").removeClass("active");$(this).parent("li").addClass("active");n=$(this).find(".IMGDIV").clone();$(".active-search-img div").replaceWith(n.addClass("active-search-img"));t=$(this).find(".IMGDIV").data("search");$("input#SearchString").attr("placeholder",$(this).find(".IMGDIV").data("ph"));$("input#searchType").val(t)});$("input.total-search-box").keypress(function(n){n.which===13&&(n.preventDefault(),$(this).parents(".main-search").find("form").submit())});$(".navbar-form").submit(function(n){var i=$("#searchType").val(),t;i=="ALL"&&(t=$(this).find(".total-search-box").val(),$(this).find(".total-search-box").css("box-shadow"," 0 0 5px red"),t.trim().length==0&&n.preventDefault())});$(document).delegate(".navbar-fixed-top .search-mini .row","click",function(){location.replace($(this).data("link"))});$this=$("#searchPartialContent");$parent=$this.parent();n=$this.data("url");n&&n.length>0&&$.ajax({url:n,cache:!1,type:"GET",dataType:"json",success:function(n){$this.replaceWith(n.Result);$(".search-result-count span").html(n.ResultCount);$(".search-menu").append(n.SearchPanel);$("input, textarea").placeholder();findBootstrapEnvironment()==="xs"&&$(".search-menu").remove().clone().appendTo(".navbar-collapse")},complete:function(){$parent.find(".expandable").expander();PartialContentLoader($parent)}});$(document).delegate(".has-mini-search","keyup",function(){var r,i,t;$thisSearchBox=$(this);var n=$thisSearchBox.val(),u=$thisSearchBox.outerWidth(),t="";$.trim(n)!==""?(r=$thisSearchBox.data("minisearch"),$(".search-mini").remove(),i=" style='width:"+u+"px' ",t="",$thisSearchBox.hasClass("main-search")&&($thisSearchBox=$(".navbar-fixed-top .container"),i="",t="col-md-10 col-md-offset-1"),n.length>2&&($thisSearchBox.after("<div class='search-mini panel panel-default "+t+"' "+i+"><div id='loading'><\/div><\/div>"),$.ajax({url:r,cache:!1,type:"GET",data:{searchString:n},success:function(n){$thisSearchBox.next(".search-mini").html(n)}})),$(document).click(function(n){$(n.target).is(".search-mini")||$(".search-mini").remove()})):$(".search-mini").remove()});$(document).delegate("div.search-mini-item a, div.search-nano-item a","click",function(n){n.preventDefault()});$(document).delegate("div.sort-item","click",function(){var n=$(this).data("order");$("input#sortOrder").val(n);submitSearch(1)});$(document).delegate("div.criteria-item","click",function(n){if($(n.target).is("input[type='checkbox']")){submitSearch(1);$("html, body").animate({scrollTop:0},"slow");return}$ThisCheckbox=$(this).find("input[type='checkbox']");$ThisCheckbox.is(":checked")?$ThisCheckbox.prop("checked",!1):$ThisCheckbox.prop("checked",!0);submitSearch(1);$("html, body").animate({scrollTop:0},"slow")});$(document).delegate(".search-menu-criteria div.search-mini-item, .search-menu-criteria div.search-nano-item","click",function(){var t=$(this).data("id"),n;$parentBox=$(this).parents("div.criteria-box");$thistextbox=$parentBox.find("input[type='text']");n=$thistextbox.attr("checkboxName");$thistextbox.before("<input type='checkbox' name='"+n+"' id='"+n+"' value='"+t+"' style='display:none' checked='checked' />");submitSearch(1)});$(document).delegate("div#nextSearchResults","click",function(){$thisNext=$(this);var n=$(this).data("nextpage");submitSearch(n,function(n){$thisNext.replaceWith(n.Result)})});AutoScroll("div#nextSearchResults",1e3)});