function populateChooseUsers(){$this=$("ul#choosedUsers");var n=[];$.each($this.find("li"),function(t,i){n.push($(i).data("id"))});$this.find("input#UserTags").val(n.join(","))}$(document).ready(function(){populateChooseUsers();$(document).delegate(".hasUserChoose div.search-mini-item, .hasUserChoose div.search-nano-item","click",function(){var i,n;$parentBox=$(this).parents("div.hasUserChoose");var r=$(this).data("id"),u=$(this).find(".us-text").data("name"),t=[];($.each($parentBox.find("#choosedUsers .us-txt"),function(n,i){t.push($(i).data("name"))}),$.inArray(u,t)>-1)||(i="<button type='button' class='close pull-right'><span aria-hidden='true'>&times;<\/span><span class='sr-only'>Close<\/span><\/button>"+$(this).html(),$parentBox.find("#choosedUsers").append("<li class='btn btn-default' data-id='"+r+"'>"+i+"<\/li>"),n=[],$.each($parentBox.find("#choosedUsers li"),function(t,i){n.push($(i).data("id"))}),$parentBox.find("input#UserTags").length>0?$parentBox.find("input#UserTags").val(n.join(",")):n.length===1&&$parentBox.find("input#UserTag").val(n.join(",")))});$(document).delegate("#choosedUsers button","click",function(){$parentBox=$(this).parents("ul#choosedUsers");$(this).parent("li").remove();var n=[];$.each($parentBox.find("li"),function(t,i){n.push($(i).data("id"))});$parentBox.find("input#UserTags").length>0?$parentBox.find("input#UserTags").val(n.join(",")):n.length==0&&$parentBox.find("input#UserTag").val(n.join(","))})});